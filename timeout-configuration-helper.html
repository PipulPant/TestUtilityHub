<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Timeout Configuration Helper - QA Test Utility Hub</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body class="utility-page">
<header>
  <i class="fas fa-bars hamburger" onclick="toggleSidebar()"></i>
  <h1><i class="fas fa-hourglass-half"></i> Timeout Configuration Helper</h1>
  <a href="index.html" class="home-icon"><i class="fas fa-home"></i></a>
</header>
<div class="sidebar" id="sidebar"></div>
<div class="content">
  <div class="container">
    <h2>Calculate Optimal Timeout</h2>
    <form id="timeoutForm">
      <label for="networkSpeed">Select Network Speed:</label>
      <select id="networkSpeed" required>
        <option value="slow">Slow (3G/Mobile)</option>
        <option value="average" selected>Average (4G/Broadband)</option>
        <option value="fast">Fast (5G/Fiber)</option>
      </select>
      <label for="expectedLoadTime">Expected Load Time (in seconds):</label>
      <input type="number" id="expectedLoadTime" placeholder="e.g., 5" min="0.1" step="0.1" required>
      <button type="button" onclick="calculateTimeout()">
        <i class="fas fa-calculator"></i> CALCULATE SUGGESTED TIMEOUT
      </button>
    </form>
    <div class="result" id="timeoutResult" style="display: none;"></div>
  </div>
</div>
<script src="common.js"></script>
<script>
  function calculateTimeout() {
    const networkSpeed = document.getElementById("networkSpeed").value;
    const expectedLoadTime = parseFloat(document.getElementById("expectedLoadTime").value);
    const resultDiv = document.getElementById("timeoutResult");
    if (!expectedLoadTime || expectedLoadTime <= 0) {
      resultDiv.style.display = 'block';
      resultDiv.innerHTML = "<p class='error'>Please enter a valid load time.</p>";
      return;
    }
    // Set base timeout multiplier based on network speed
    let multiplier;
    let speedDescription;
    switch (networkSpeed) {
      case 'slow':
        multiplier = 3;
        speedDescription = 'Slow (3G/Mobile)';
        break;
      case 'average':
        multiplier = 2;
        speedDescription = 'Average (4G/Broadband)';
        break;
      case 'fast':
        multiplier = 1.5;
        speedDescription = 'Fast (5G/Fiber)';
        break;
    }
    // Calculate suggested timeout
    const suggestedTimeoutMs = expectedLoadTime * multiplier * 1000;
    const suggestedTimeoutSec = (suggestedTimeoutMs / 1000).toFixed(1);
    resultDiv.style.display = 'block';
    resultDiv.innerHTML = `
      <p class="success">Suggested Timeout:</p>
      <p style="font-size: 1.3em; margin: 10px 0;">
        <strong>${suggestedTimeoutMs.toLocaleString()} ms</strong> 
        <span style="color: var(--text-muted);">(${suggestedTimeoutSec} seconds)</span>
      </p>
      <p style="margin-top: 15px; color: var(--text-muted);">
        Network Speed: ${speedDescription}<br>
        Expected Load Time: ${expectedLoadTime} seconds<br>
        Multiplier: ${multiplier}x
      </p>
      <div style="margin-top: 15px; padding: 10px; background: var(--bg-dark); border-radius: 6px;">
        <p style="font-size: 0.9em;"><strong>Playwright Configuration:</strong></p>
        <div class="code-output" style="margin-top: 8px;">timeout: ${suggestedTimeoutMs}</div>
      </div>
    `;
  }
</script>
</body>
</html>
